flowchart TD
    A[main函数开始] --> B[rclcpp::init<br/>初始化ROS2]
    B --> C[std::make_shared<br/>创建ZmcController实例]
    C --> D[ZmcController构造函数<br/>初始化ROS2节点]
    D --> E["zmc_controller->start()<br/>启动控制器"]
    E --> F[rclcpp::spin<br/>运行节点主循环]
    F --> G{接收ROS2事件}
    G --> H[定时器回调<br/>timer_callback]
    G --> I[服务请求<br/>handleConvertDxfToXml]
    G --> J[Action请求<br/>handleMoveToPosition]
    G --> K[消息订阅<br/>handleObjectPosition]
    H --> F
    I --> F
    J --> F
    K --> F
    G --> L[收到停止信号]
    L --> M["zmc_controller->stop()<br/>停止控制器"]
    M --> N[rclcpp::shutdown<br/>关闭ROS2]
    N --> O[main函数结束]